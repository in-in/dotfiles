---
- hosts: local

  pre_tasks:
    - name: create helpers vars
      set_fact:
        'helper_{{ item.path | splitext | first }}': '{{ item.src }}'
      loop: '{{ q("filetree", helper_path) }}'

  roles:
    - filesystem
    - utility
    - optimization
    - zsh
    - git
    - cinnamon
    - gnome
    - mintupdate
    - font
    - nemo
    - nvm
    - emacs
    - vscode
    - gnome_terminal
    - calibre
    - easytag
    - flameshot
    - network_manager

  post_tasks:
    - name: clean and reboot
      become: yes
      block:
        - name: remove useless packages
          apt:
            force_apt_get: yes
            autoremove: yes
            autoclean: yes

        - name: reboot system
          command: reboot -f
