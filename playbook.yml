---
- hosts: local

  pre_tasks:
    - name: upgrade system
      become: yes
      block:
        - name: upgrade system | update cache
          apt:
            force_apt_get: yes
            update_cache: yes

        - name: upgrade system | upgrade important packages
          apt:
            force_apt_get: yes
            upgrade: dist

  roles:
    - global_config
    - utility
    - disable_update
    - zsh
    - git
    - gsettings
    - nvm
    - atom
    - gnome_terminal
    - mega
    - keepassxc
    - shutter

  post_tasks:
    - name: post tasks
      become: yes
      block:
        - name: remove useless packages
          apt:
            force_apt_get: yes
            autoremove: yes
            autoclean: yes

        - name: reboot system
          shell: reboot -f
