---
- name: gitignore | create temporary directory
  import_tasks: '{{ helper_path }}/tempfile.yml'
  vars:
    tempfile_suffix: '.gitignore'

- name: gitignore | create template
  include_tasks: '{{ helper_path }}/template.yml'
  vars:
    src: 'gitignore.j2'
    dest: '{{ helper_tempfile_result.path }}/gitignore{{ index }}'
  loop: '{{ utility_gitignore_list | flatten }}'
  loop_control:
    index_var: index

- name: gitignore | create main file
  assemble:
    src: '{{ helper_tempfile_result.path }}'
    dest: '{{ dotfiles_directory }}/.gitignore'
    delimiter: '#'
