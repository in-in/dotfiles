---
- name: gitignore | create temporary directory
  include_tasks: '{{ helper_tempfile }}'
  vars:
    tempfile_suffix: '.gitignore'

- name: gitignore | create template
  template:
    src: gitignore.j2
    dest: '{{ helper_tempfile_result.path }}/gitignore{{ index }}'
    lstrip_blocks: yes
    backup: yes
  loop: '{{ utility_gitignore_list | flatten }}'
  loop_control:
    index_var: index

- name: gitignore | create main file
  assemble:
    src: '{{ helper_tempfile_result.path }}'
    dest: '{{ dotfiles_directory }}/.gitignore'
    delimiter: '#'
