---
- set_fact:
    flat_utility_link: '{{ utility_link_list | flatten }}'

- name: link | collect stat
  import_tasks: '{{ helper_path }}/stat.yml'
  vars:
    path: '{{ item.dest }}'
    data: '{{ flat_utility_link }}'

- name: link | remove existing directory
  include_tasks: '{{ helper_path }}/dir_remove.yml'
  vars:
    path: '{{ item.item.dest }}'
  loop: '{{ helper_stat_result.results }}'

- name: link | create link
  file:
    src: '{{ item.src }}'
    dest: '{{ item.dest }}'
    follow: no
    force: yes
    state: link
  loop: '{{ flat_utility_link }}'
