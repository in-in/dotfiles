---
- set_fact:
    flat_git_repository: '{{ utility_git_repository_list | flatten }}'

- name: git repository | collect stat
  include_tasks: '{{ helper_stat }}'
  vars:
    path: '{{ item.dest }}'
    data: '{{ flat_git_repository }}'

- name: git repository | remove existing directory
  include_tasks: '{{ helper_dir_remove }}'
  vars:
    path: '{{ item.item.dest }}'
  loop: '{{ helper_stat_result.results }}'

- name: git repository | add repository
  git:
    repo: '{{ item.repo }}'
    dest: '{{ item.dest }}'
  loop: '{{ flat_git_repository }}'
