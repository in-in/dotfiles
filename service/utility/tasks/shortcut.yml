---
- name: shortcut | create settings
  set_fact:
    shortcut_settings: "{{ shortcut_settings
      | default([])
      + [{
          'key': '/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom' ~ index ~ '/name',
          'value': item.name
        },
        {
          'key': '/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom' ~ index ~ '/command',
          'value': item.command
        },
        {
          'key': '/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom' ~ index ~ '/binding',
          'value': item.binding
        }]
    }}"
    shortcut_new_keys: "{{ shortcut_new_keys
      | default([])
      + ['/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom' ~ index ~ '/']
    }}"
  loop: '{{ utility_shortcut_list | flatten }}'
  loop_control:
    index_var: index

- name: shortcut | add settings
  include_tasks: '{{ helper_dconf }}'
  vars:
    list:
      - '{{ shortcut_settings }}'
      - key: '/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings'
        value: '{{ shortcut_new_keys }}'
