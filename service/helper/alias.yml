---
- name: create task variable
  set_fact:
    alias_path: '{{ user_home }}/.aliases.sh'

- name: create file
  copy:
    content: '#!/usr/bin/zsh'
    dest: '{{ alias_path }}'
  when: alias_path is not file

- name: add block to file
  blockinfile:
    marker: '# {mark} role: {{ role_name }}'
    path: '{{ alias_path }}'
    block: "{{ lookup('template', role_path ~ '/templates/alias.sh') }}"
