---
- name: run package helper
  import_tasks: '{{ helpers }}/package_apt.yml'
  vars:
    package_apt_list:
      install:
        - 'fonts-hack'
        - 'fonts-roboto-hinted'

- name: recreate directory
  block:
    - name: remove directory
      file:
        path: '{{ font_dir }}'
        state: absent

    - import_tasks: '{{ helpers }}/dir_create.yml'
      vars:
        dir_create_data: |
          {{
            q('items', font_list)
            | map('basename')
            | map('splitext')
            | map('first')
            | map('regex_replace', '^', font_dir ~ '/')
            | list
          }}

- name: download and unarchive files
  unarchive:
    src: '{{ item }}'
    dest: '{{ font_dir }}/{{ (item | basename | splitext)[0] }}'
    remote_src: yes
  loop: '{{ font_list }}'
