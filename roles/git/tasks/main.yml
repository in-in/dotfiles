---
- name: run repo helper
  import_tasks: '{{ helpers }}/repo.yml'
  vars:
    repo_facts:
      - repo: 'ppa:git-core/ppa'

- name: run package helper
  import_tasks: '{{ helpers }}/package_apt.yml'
  vars:
    package_apt_facts:
      install:
        - 'git'

- name: git config
  block:
    - name: git config | with vault password
      git_config:
        name: '{{ item.name }}'
        value: '{{ item.value }}'
        scope: '{{ item.scope | default("global") }}'
        repo: '{{ item.repo | default(None) }}'
      loop: '{{ git_config_data }}'
  rescue:
    - name: git config | without vault password
      debug:
        msg: 'Create your own git config yourself'
