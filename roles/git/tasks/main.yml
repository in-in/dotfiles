---
- name: git config
  block:
    - name: git config | with vault password
      git_config:
        name: '{{ item.name }}'
        value: '{{ item.value }}'
        scope: '{{ item.scope | default("global") }}'
        repo: '{{ item.repo | default(None) }}'
      loop: '{{ git_config_data }}'
  rescue:
    - name: git config | without vault password
      debug:
        msg: 'Create your own git config yourself'

- name: create .gitignore file
  import_tasks: '{{ helper_path }}/template.yml'
  vars:
    src: '{{ dotfiles_roles }}/git/templates/.gitignore.j2'
    dest: '{{ dotfiles_directory }}/.gitignore'
