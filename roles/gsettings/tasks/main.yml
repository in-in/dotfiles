---
- name: move schema file
  # TODO: remove this task when updating dash-to-panel to version 14
  # https://github.com/home-sweet-gnome/dash-to-panel/issues/394
  become: yes
  copy:
    src: /usr/share/gnome-shell/extensions/dash-to-panel@jderose9.github.com/schemas/org.gnome.shell.extensions.dash-to-panel.gschema.xml
    dest: /usr/share/glib-2.0/schemas/

- name: compile schema file
  become: yes
  command: glib-compile-schemas /usr/share/glib-2.0/schemas/
  changed_when: false

- name: desktop
  command: '{{ item }}'
  loop:
    - gsettings set org.gnome.desktop.background color-shading-type 'solid'
    - gsettings set org.gnome.desktop.background primary-color '#333'
    - gsettings set org.gnome.desktop.input-sources per-window true
    - gsettings set org.gnome.desktop.input-sources sources "[('xkb', 'us'), ('xkb', 'ru')]"
    - gsettings set org.gnome.desktop.input-sources xkb-options "['grp:shift_caps_switch']"
    - gsettings set org.gnome.desktop.interface clock-show-date true
    - gsettings set org.gnome.desktop.interface monospace-font-name 'Hack 12'
    - gsettings set org.gnome.desktop.lockdown disable-lock-screen false
    - gsettings set org.gnome.desktop.privacy report-technical-problems false
    - gsettings set org.gnome.desktop.sound event-sounds false
    - gsettings set org.gnome.desktop.wm.preferences audible-bell false
    - gsettings set org.gnome.desktop.wm.preferences num-workspaces 4
    - gsettings set org.gnome.mutter dynamic-workspaces false
    - gsettings set org.gnome.online-accounts whitelisted-providers []
  changed_when: false

# path for 'favorite-apps' filenane: /usr/share/applications
- name: dash
  command: '{{ item }}'
  loop:
    - gsettings set org.gnome.shell favorite-apps "[]"
    - gsettings set org.gnome.shell enabled-extensions "['dash-to-panel@jderose9.github.com']"
    - gsettings set org.gnome.shell.extensions.dash-to-panel animate-app-switch false
    - gsettings set org.gnome.shell.extensions.dash-to-panel animate-show-apps false
    - gsettings set org.gnome.shell.extensions.dash-to-panel animate-window-launch false
    - gsettings set org.gnome.shell.extensions.dash-to-panel appicon-margin 5
    - gsettings set org.gnome.shell.extensions.dash-to-panel dot-size 5
    - gsettings set org.gnome.shell.extensions.dash-to-panel dot-style-focused 'SEGMENTED'
    - gsettings set org.gnome.shell.extensions.dash-to-panel location-clock 'STATUSRIGHT'
    - gsettings set org.gnome.shell.extensions.dash-to-panel middle-click-action 'QUIT'
    - gsettings set org.gnome.shell.extensions.dash-to-panel panel-size 44
    - gsettings set org.gnome.shell.extensions.dash-to-panel shift-click-action 'LAUNCH'
  changed_when: false

- name: nautilus
  command: '{{ item }}'
  loop:
    - gsettings set org.gnome.nautilus.desktop trash-icon-visible false
    - gsettings set org.gnome.nautilus.desktop volumes-visible false
    - gsettings set org.gnome.nautilus.list-view default-zoom-level 'small'
    - gsettings set org.gnome.nautilus.list-view use-tree-view true
    - gsettings set org.gnome.nautilus.preferences default-folder-viewer 'list-view'
    - gsettings set org.gnome.nautilus.preferences recursive-search 'never'
    - gsettings set org.gnome.nautilus.preferences show-create-link true
    - gsettings set org.gnome.nautilus.preferences show-hidden-files true
  changed_when: false
