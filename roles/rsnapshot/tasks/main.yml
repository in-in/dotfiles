---
- name: run package helper
  import_tasks: '{{ helpers }}/package_apt.yml'
  vars:
    package_apt_facts:
      install:
        - 'rsnapshot'

- name: run template helper
  import_tasks: '{{ helpers }}/template.yml'
  vars:
    template_facts:
      - src: 'rsnapshot.conf'
        dest: '{{ user_config }}/rsnapshot'
        data:
          - '{{ user_storage }}/archive/'
          - '{{ user_storage }}/audiobook/'
          - '{{ user_storage }}/book/'
          - '{{ user_storage }}/dev/'
          - '{{ user_storage }}/gym/'
          - '{{ user_storage }}/music/'
          - '{{ user_storage }}/picture/'
          - '{{ user_storage }}/privacy/'
          - '{{ user_storage }}/sync/'
          - '{{ user_storage }}/video/'
  tags: 'template_rsnapshot'

- name: run alias helper
  import_tasks: '{{ helpers }}/alias.yml'
  tags: 'alias_rsnapshot'
