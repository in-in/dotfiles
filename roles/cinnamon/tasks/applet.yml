---
- name: applet | create temporary directory
  import_tasks: '{{ helper_path }}/tempfile.yml'
  vars:
    tempfile_suffix: '.applets'

- name: applet | add repository
  git:
    repo: 'https://github.com/linuxmint/cinnamon-spices-applets.git'
    dest: '{{ helper_tempfile_result.path }}'

- name: applet | collect stat
  import_tasks: '{{ helper_path }}/stat.yml'
  vars:
    path: '{{ helper_tempfile_result.path ~ "/" ~ item | default(None) }}'
    data: '{{ cinnamon_applets }}'

- name: applet | install
  command: 'cinnamon-install-spice applet {{ item.stat.path }}'
  when: item.stat.isdir
  loop: '{{ helper_stat_result.results }}'
