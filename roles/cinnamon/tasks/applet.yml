---
- name: applet | run tempfile helper
  import_tasks: '{{ helpers }}/tempfile.yml'
  vars:
    tempfile_suffix: '.applets'

- name: applet | add repository
  git:
    repo: 'https://github.com/linuxmint/cinnamon-spices-applets.git'
    dest: '{{ helper_tempfile_result }}'

- name: applet | run stat helper
  import_tasks: '{{ helpers }}/stat.yml'
  vars:
    path: '{{ helper_tempfile_result ~ "/" ~ item | default(None) }}'
    data: '{{ cinnamon_applets }}'

- name: applet | install
  command: 'cinnamon-install-spice applet {{ item.stat.path }}'
  when: item.stat.isdir
  loop: '{{ helper_stat_result.results }}'
