- name: helper | launcher | create task variables
  set_fact:
    startup_dir: '{{ user_config }}/autostart'
    launcher_dir: '{{ user_home }}/.local/share/applications'

- import_tasks: '{{ helpers }}/dir_create.yml'
  vars:
    dir_create_facts:
      - '{{ startup_dir }}'
      - '{{ launcher_dir }}'

- name: helper | launcher | create file and content
  copy:
    content: "{{ lookup('template', 'launcher') }}"
    dest: |-
      {{
        (item.startup is defined)
        | ternary(startup_dir, launcher_dir)
        ~ '/' ~
        item.name
        ~ '.desktop'
      }}
  loop: '{{ launcher_facts }}'
