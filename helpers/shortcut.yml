---
- name: helper | shortcut | create task variables
  set_fact:
    shortcut_settings: |
      {{ shortcut_settings
        | default([])
        + [{
            'key': '/org/cinnamon/desktop/keybindings/custom-keybindings/custom' ~ item.command | to_uuid ~ '/name',
            'value': item.name
          },
          {
            'key': '/org/cinnamon/desktop/keybindings/custom-keybindings/custom' ~ item.command | to_uuid ~ '/command',
            'value': item.command
          },
          {
            'key': '/org/cinnamon/desktop/keybindings/custom-keybindings/custom' ~ item.command | to_uuid ~ '/binding',
            'value': item.binding
          }]
      }}
    shortcut_new_keys: |
      {{ shortcut_new_keys
        | default([])
        + ['custom' ~ item.command | to_uuid]
      }}
  loop: '{{ shortcut_facts }}'

- name: helper | shortcut | run dconf helper
  import_tasks: '{{ helpers }}/dconf.yml'
  vars:
    dconf_facts:
      - '{{ shortcut_settings }}'
      - key: '/org/cinnamon/desktop/keybindings/custom-list'
        value: '{{ shortcut_new_keys }}'
