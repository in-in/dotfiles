---
- name: create task variables
  block:
  - set_fact:
      startup_dir: '{{ user_config }}/autostart'
  - set_fact:
      entry_path: '{{ startup_dir }}/{{ startup_list.name }}.desktop'

- name: run dir_create helper
  import_tasks: '{{ helpers }}/dir_create.yml'
  vars:
    dir_create_data:
      - '{{ startup_dir }}'

- name: create file and content
  copy:
    content: "{{ lookup('template', helpers ~ '/templates/startup') }}"
    dest: '{{ entry_path }}'
  when: entry_path is not file
